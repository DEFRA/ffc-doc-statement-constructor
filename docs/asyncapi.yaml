asyncapi: 3.0.0
info:
  title: FFC Document Statement Constructor
  version: 1.0.1
  description: Construct payment statements
channels:
  ffc-doc-statement-data/delinked:
    address: ffc-doc-statement-data
    messages:
      subscribe.message:
        $ref: '#/components/messages/DelinkedCalculation'
  ffc-doc-statement-data/calculation:
    address: ffc-doc-statement-data
    messages:
      subscribe.message:
        $ref: '#/components/messages/DWHCalculation'
  ffc-doc-statement-data/organisation:
    address: ffc-doc-statement-data
    messages:
      subscribe.message:
        $ref: '#/components/messages/DWHOrganisation'
  ffc-doc-statement-data/total:
    address: ffc-doc-statement-data
    messages:
      subscribe.message:
        $ref: '#/components/messages/DWHTotal'
  ffc-doc-statement-data/dax:
    address: ffc-doc-statement-data
    messages:
      subscribe.message:
        $ref: '#/components/messages/DWHDax'    
  ffc-pay-statement-processing:
    address: ffc-pay-statement-processing
    messages:
      subscribe.message:
        $ref: '#/components/messages/PaymentRequestProcessing'
  ffc-pay-statement-submit:
    address: ffc-pay-statement-submit
    messages:
      subscribe.message:
        $ref: '#/components/messages/PaymentRequestSubmit'
  ffc-pay-statement-return:
    address: ffc-pay-statement-return
    messages:
      subscribe.message:
        $ref: '#/components/messages/ReturnMessage'
  ffc-doc-statements/statement:
    address: ffc-doc-statements
    messages:
      publish.message:
        $ref: '#/components/messages/PaymentStatement'
  ffc-doc-statements/sfi-23-quarterly-statement:
    address: ffc-doc-statements
    messages:
      publish.message:
        $ref: '#/components/messages/SFI23QuarterlyPaymentStatement'
  ffc-doc-statements/delinked-statement:
    address: ffc-doc-statements
    messages:
      publish.message:
        $ref: '#/components/messages/DelinkedStatement'
operations:
  ffc-doc-statement-data/calculation.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-doc-statement-data~1calculation'
    messages:
      - $ref: '#/channels/ffc-doc-statement-data~1calculation/messages/subscribe.message'
  ffc-doc-statement-data/delinkedCalculation.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-doc-statement-data~1delinked'
    messages:
      - $ref: '#/channels/ffc-doc-statement-data~1delinked/messages/subscribe.message'
  ffc-doc-statement-data/organisation.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-doc-statement-data~1organisation'
    messages:
      - $ref: '#/channels/ffc-doc-statement-data~1organisation/messages/subscribe.message'
  ffc-doc-statement-data/total.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-doc-statement-data~1total'
    messages:
      - $ref: '#/channels/ffc-doc-statement-data~1total/messages/subscribe.message'
  ffc-doc-statement-data/dax.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-doc-statement-data~1dax'
    messages:
      - $ref: '#/channels/ffc-doc-statement-data~1dax/messages/subscribe.message'
  ffc-pay-statement-processing.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-pay-statement-processing'
    messages:
      - $ref: '#/channels/ffc-pay-statement-processing/messages/subscribe.message'
  ffc-pay-statement-submit.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-pay-statement-submit'
    messages:
      - $ref: '#/channels/ffc-pay-statement-submit/messages/subscribe.message'
  ffc-pay-statement-return.subscribe:
    action: receive
    channel:
      $ref: '#/channels/ffc-pay-statement-return'
    messages:
      - $ref: '#/channels/ffc-pay-statement-return/messages/subscribe.message'
  ffc-doc-statements/statement.publish:
    action: send
    channel:
      $ref: '#/channels/ffc-doc-statements~1statement'
    messages:
      - $ref: '#/channels/ffc-doc-statements~1statement/messages/publish.message'
  ffc-doc-statements/sfi-23-quarterly-statement.publish:
    action: send
    channel:
      $ref: '#/channels/ffc-doc-statements~1sfi-23-quarterly-statement'
    messages:
      - $ref: '#/channels/ffc-doc-statements~1sfi-23-quarterly-statement/messages/publish.message'
  ffc-doc-statements/delinked-statement:
    action: send
    channel:
      $ref: '#/channels/ffc-doc-statements~1delinked-statement'
    messages:
      - $ref: '#/channels/ffc-doc-statements~1delinked-statement/messages/publish.message'
components:
  messages:
    DelinkedCalculation:
      name: Delinked calculation from DWH
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DelinkedCalculation'        
    DWHCalculation:
      name: Calculation information from DWH
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DWHCalculation'
    DWHOrganisation:
      name: Organisation information from DWH
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DWHOrganisation'
    DWHTotal:
      name: Organisation information from DWH
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DWHTotal'
    DWHDax:
      name: Organisation information from DWH
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DWHDax'
    PaymentRequestProcessing:
      name: Payment statement before PPA
      contentType: application/json
      payload:
        $ref: '#/components/schemas/PaymentRequestProcessing'
    PaymentRequestSubmit:
      name: Payment statement after PPA
      contentType: application/json
      payload:
        $ref: '#/components/schemas/PaymentRequestSubmit'
    ReturnMessage:
      name: Return Message
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ReturnMessage'
    PaymentStatement:
      name: Payment statement
      contentType: application/json
      payload:
        $ref: '#/components/schemas/PaymentStatement'
    SFI23QuarterlyPaymentStatement:
      name: SFI-23 Quarterly Payment statement
      contentType: application/json
      payload:
        $ref: '#/components/schemas/SFI23QuarterlyPaymentStatement'
    DelinkedStatement:
      name: Delinked Payment statement
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DelinkedStatement'
  schemas:
    DWHCalculation:
      type: object
      properties:
        calculationDate:
          $ref: '#/components/schemas/CalculationDate'
        calculationReference:
          $ref: '#/components/schemas/CalculationReference'
        invoiceNumber:
          $ref: '#/components/schemas/InvoiceNumberSitiAgri'
        frn:
          $ref: '#/components/schemas/FRN'
        sbi:
          $ref: '#/components/schemas/SBI'
        fundings:
          type: array
          items:
            $ref: '#/components/schemas/FundingInitial'
        type:
          $ref: '#/components/schemas/Type'
        updated:
          $ref: '#/components/schemas/Updated'
    DWHOrganisation:
      type: object
      properties:
        businessName:
          $ref: '#/components/schemas/BusinessName'
        addressLine1:
          $ref: '#/components/schemas/AddressLine1'
        addressLine2:
          $ref: '#/components/schemas/AddressLine2'
        addressLine3:
          $ref: '#/components/schemas/AddressLine3'
        city:
          $ref: '#/components/schemas/City'
        county:
          $ref: '#/components/schemas/County'
        emailAddress:
          $ref: '#/components/schemas/EmailAddress'
        frn:
          $ref: '#/components/schemas/FRN'
        name:
          $ref: '#/components/schemas/Name'
        postcode:
          $ref: '#/components/schemas/Postcode'
        sbi:
          $ref: '#/components/schemas/SBI'
        type:
          $ref: '#/components/schemas/Type'
        updated:
          $ref: '#/components/schemas/Updated'
    DWHDax:
      type: object
      properties:
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        calculationReference:
          $ref: '#/components/schemas/CalculationId'
        paymentPeriod:
          $ref: '#/components/schemas/PaymentPeriod'
        paymentAmount:
          $ref: '#/components/schemas/PaymentAmount'
        transactionDate:
          $ref: '#/components/schemas/TransactionDate'
        type:
          $ref: '#/components/schemas/TypeDax'
    DWHTotal:
      type: object
      properties:
        calculationReference:
          $ref: '#/components/schemas/CalculationId'
        sbi:
          $ref: '#/components/schemas/SBI'
        frn:
          $ref: '#/components/schemas/FRN'
        agreementNumber:
          $ref: '#/components/schemas/AgreementNumber'
        agreementEnd:
          $ref: '#/components/schemas/AgreementEnd'
        agreementStart:
          $ref: '#/components/schemas/AgreementStart'
        claimReference:
          $ref: '#/components/schemas/ClaimId'
        calculationDate:
          $ref: '#/components/schemas/CalculationDate'
        invoiceNumber:
          $ref: '#/components/schemas/InvoiceNumber'
        schemeType:
          $ref: '#/components/schemas/SchemeType'
        totalActionPayments:
          $ref: '#/components/schemas/TotalActionPayments'
        totalAdditionalPayments:
          $ref: '#/components/schemas/TotalAdditionalPayments'
        totalPayments:
          $ref: '#/components/schemas/TotalPayments'
        updated:
          $ref: '#/components/schemas/Updated'
        actions:
          type: array
          items:
            $ref: '#/components/schemas/Action'
        type:
          $ref: '#/components/schemas/TypeTotals'
    DWHAction:
      type: object
      properties:
        actionReference:
          $ref: '#/components/schemas/ActionId'
        calculationReference:
          $ref: '#/components/schemas/CalculationId'
        actionCode:
          $ref: '#/components/schemas/ActionCode'
        actionName:
          $ref: '#/components/schemas/ActionName'
        annualValue:
          $ref: '#/components/schemas/AnnualValue'
        fundingCode:
          $ref: '#/components/schemas/FundingCode'
        groupName:
          $ref: '#/components/schemas/GroupName'
        landArea:
          $ref: '#/components/schemas/LandArea'
        overDeclarationPenalty:
          $ref: '#/components/schemas/OverDeclarationPenalty'
        quarterlyPaymentAmount:
          $ref: '#/components/schemas/QuarterlyPaymentAmount'
        quarterlyValue:
          $ref: '#/components/schemas/QuarterlyValue'
        rate:
          $ref: '#/components/schemas/Rate'
        uom:
          $ref: '#/components/schemas/UnitOfMeasure'
    DelinkedCalculation:
      type: object
      properties:
        calculationId:
          $ref: '#/components/schemas/CalculationId'
        applicationId:
          $ref: '#/components/schemas/ApplicationId'
        frn:
          $ref: '#/components/schemas/FRN'
        sbi:
          $ref: '#/components/schemas/SBI'
        paymentBand1:
          $ref: '#/components/schemas/PaymentBand1'
        paymentBand2:
          $ref: '#/components/schemas/PaymentBand2'
        paymentBand3:
          $ref: '#/components/schemas/PaymentBand3'
        paymentBand4:
          $ref: '#/components/schemas/PaymentBand4'
        percentageReduction1:
          $ref: '#/components/schemas/PercentageReduction1'
        percentageReduction2:
          $ref: '#/components/schemas/PercentageReduction2'
        percentageReduction3:
          $ref: '#/components/schemas/PercentageReduction3'
        percentageReduction4:
          $ref: '#/components/schemas/PercentageReduction4'
        progressiveReductions1:
          $ref: '#/components/schemas/ProgressiveReductions1'
        progressiveReductions2:
          $ref: '#/components/schemas/ProgressiveReductions2'
        progressiveReductions3:
          $ref: '#/components/schemas/ProgressiveReductions3'
        progressiveReductions4:
          $ref: '#/components/schemas/ProgressiveReductions4'
        referenceAmount:
          $ref: '#/components/schemas/ReferenceAmount'
        totalProgressiveReduction:
          $ref: '#/components/schemas/TotalProgressiveReduction'
        totalDelinkedPayment:
          $ref: '#/components/schemas/TotalDelinkedPayment'
        paymentAmountCalculated:
          $ref: '#/components/schemas/PaymentAmountCalculated'
        type:
          $ref: '#/components/schemas/TypeDelinked'
    PaymentRequestProcessing:
      type: object
      required:
        - agreementNumber
        - contractNumber
        - correlationId
        - currency
        - deliveryBody
        - dueDate
        - frn
        - invoiceLines
        - invoiceNumber
        - ledger
        - marketingYear
        - paymentRequestNumber
        - schedule
        - schemeId
        - value
      properties:
        agreementNumber:
          $ref: '#/components/schemas/AgreementNumber'
        contractNumber:
          $ref: '#/components/schemas/ContractNumber'
        correlationId:
          $ref: '#/components/schemas/CorrelationId'
        currency:
          $ref: '#/components/schemas/Currency'
        deliveryBody:
          $ref: '#/components/schemas/DeliveryBody'
        dueDate:
          $ref: '#/components/schemas/DueDate'
        frn:
          $ref: '#/components/schemas/FRN'
        invoiceLines:
          $ref: '#/components/schemas/InvoiceLinesProcessing'
        invoiceNumber:
          $ref: '#/components/schemas/InvoiceNumber'
        ledger:
          $ref: '#/components/schemas/Ledger'
        marketingYear:
          $ref: '#/components/schemas/MarketingYear'
        paymentRequestNumber:
          $ref: '#/components/schemas/PaymentRequestNumber'
        schedule:
          $ref: '#/components/schemas/Schedule'
        schemeId:
          $ref: '#/components/schemas/SchemeId'
        value:
          $ref: '#/components/schemas/ValueInteger'
    PaymentRequestSubmit:
      type: object
      required:
        - agreementNumber
        - contractNumber
        - correlationId
        - currency
        - deliveryBody
        - dueDate
        - frn
        - invoiceLines
        - invoiceNumber
        - ledger
        - marketingYear
        - paymentRequestNumber
        - schedule
        - schemeId
        - value
      properties:
        agreementNumber:
          $ref: '#/components/schemas/AgreementNumber'
        contractNumber:
          $ref: '#/components/schemas/ContractNumber'
        correlationId:
          $ref: '#/components/schemas/CorrelationId'
        currency:
          $ref: '#/components/schemas/Currency'
        deliveryBody:
          $ref: '#/components/schemas/DeliveryBody'
        dueDate:
          $ref: '#/components/schemas/DueDate'
        frn:
          $ref: '#/components/schemas/FRN'
        invoiceLines:
          $ref: '#/components/schemas/InvoiceLinesSubmit'
        invoiceNumber:
          $ref: '#/components/schemas/InvoiceNumber'
        ledger:
          $ref: '#/components/schemas/Ledger'
        marketingYear:
          $ref: '#/components/schemas/MarketingYear'
        paymentRequestNumber:
          $ref: '#/components/schemas/PaymentRequestNumber'
        schedule:
          $ref: '#/components/schemas/Schedule'
        schemeId:
          $ref: '#/components/schemas/SchemeId'
        value:
          $ref: '#/components/schemas/ValueInteger'
        paymentRequestId:
          $ref: '#/components/schemas/PaymentRequestId'
        referenceId:
          $ref: '#/components/schemas/ReferenceIdSubmit'
    ReturnMessage:
      type: object
      required:
        - sourceSystem
        - invoiceNumber
        - frn
        - currency
        - value
        - settlementDate
        - reference
        - settled
        - detail
        - referenceId
      properties:
        sourceSystem:
          $ref: '#/components/schemas/SourceSystem'
        invoiceNumber:
          $ref: '#/components/schemas/InvoiceNumber'
        frn:
          $ref: '#/components/schemas/FRN'
        currency:
          $ref: '#/components/schemas/Currency'
        value:
          $ref: '#/components/schemas/ValueInteger'
        settlementDate:
          $ref: '#/components/schemas/SettlementDate'
        reference:
          $ref: '#/components/schemas/Reference'
        settled:
          $ref: '#/components/schemas/Settled'
        detail:
          $ref: '#/components/schemas/Detail'
        referenceId:
          $ref: '#/components/schemas/ReferenceIdReturn'
    PaymentStatement:
      type: object
      required:
        - businessName
        - sbi
        - frn
        - address
        - scheme
        - payments
        - funding
      properties:
        businessName:
          $ref: '#/components/schemas/BusinessName'
        sbi:
          $ref: '#/components/schemas/SBI'
        frn:
          $ref: '#/components/schemas/FRN'
        email:
          $ref: '#/components/schemas/EmailAddress'
        address:
          $ref: '#/components/schemas/Address'
        scheme:
          $ref: '#/components/schemas/Scheme'
        payments:
          type: array
          items:
            $ref: '#/components/schemas/Payment'
        funding:
          type: array
          items:
            $ref: '#/components/schemas/Funding'
    SFI23QuarterlyPaymentStatement:
      type: object
      properties:
        businessName:
          $ref: '#/components/schemas/BusinessName'
        sbi:
          $ref: '#/components/schemas/SBI'
        frn:
          $ref: '#/components/schemas/FRN'
        email:
          $ref: '#/components/schemas/EmailAddress'
        address:
          $ref: '#/components/schemas/Address'
        scheme:
          $ref: '#/components/schemas/Scheme'
        calculationReference:
          $ref: '#/components/schemas/CalculationId'
        agreementNumber:
          $ref: '#/components/schemas/AgreementNumber'
        agreementEnd:
          $ref: '#/components/schemas/AgreementEnd'
        agreementStart:
          $ref: '#/components/schemas/AgreementStart'
        claimReference:
          $ref: '#/components/schemas/ClaimId'
        calculationDate:
          $ref: '#/components/schemas/CalculationDate'
        invoiceNumber:
          $ref: '#/components/schemas/InvoiceNumber'
        schemeCode:
          $ref: '#/components/schemas/SchemeCode'
        totalActionPayments:
          $ref: '#/components/schemas/TotalActionPayments'
        totalAdditionalPayments:
          $ref: '#/components/schemas/TotalAdditionalPayments'
        totalPayments:
          $ref: '#/components/schemas/TotalPayments'
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        calculationId:
          $ref: '#/components/schemas/CalculationId'
        paymentPeriod:
          $ref: '#/components/schemas/PaymentPeriod'
        paymentAmount:
          $ref: '#/components/schemas/PaymentAmount'
        transactionDate:
          $ref: '#/components/schemas/TransactionDate'
        actionGroups:
          type: array
          items:
            $ref: '#/components/schemas/ActionGroup'
        previousPaymentCount:
           $ref: '#/components/schemas/PreviousPaymentCount' 
        documentReference:
          $ref: '#/components/schemas/DocumentReference'
    ActionGroup:
      type: object
      properties:
        groupName:
          $ref: '#/components/schemas/GroupName'
        actions:
          type: array
          items:
            $ref: '#/components/schemas/Action'
    Action:
      type: object
      properties:
        actionReference:
          $ref: '#/components/schemas/ActionId'
        calculationReference:
          $ref: '#/components/schemas/CalculationId'
        actionCode:
          $ref: '#/components/schemas/ActionCode'
        actionName:
          $ref: '#/components/schemas/ActionName'
        annualValue:
          $ref: '#/components/schemas/AnnualValue'
        fundingCode:
          $ref: '#/components/schemas/FundingCode'
        groupName:
          $ref: '#/components/schemas/GroupName'
        landArea:
          $ref: '#/components/schemas/AreaClaimed'
        overDeclarationPenalty:
          $ref: '#/components/schemas/OverDeclarationPenalty'
        quarterlyPaymentAmount:
          $ref: '#/components/schemas/QuarterlyPaymentAmount'
        quarterlyValue:
          $ref: '#/components/schemas/QuarterlyValue'
        rate:
          $ref: '#/components/schemas/Rate'
        uom:
          $ref: '#/components/schemas/UnitOfMeasure'    
    ActionCode:
      type: string
      description: Identifier for action code within scheme
      example: 80001
    ActionId:
      type: number
      description: Unique identifier (pkId) for action
      example: 1234567
    ActionName:
      type: string
      description: Name of the action
      example: Manage hedgerows
    AgreementNumber:
      type: number
      description: Unique identifier for agreement
      example: 123456789
    AgreementEnd:
      type: string
      format: date-time
      description: The date the Agreement End
      example: '2022-08-22T16:45:20.891Z'
    AgreementStart:
      type: string
      format: date-time
      description: The date the Agreement Start
      example: '2022-08-22T16:45:20.891Z'
    AnnualValue:
      type: string
      description: The annual value of the action
      example: £1200 + £22.5/ha
    FRN:
      type: number
      description: Firm Reference Number
      minimum: 1000000000
      maximum: 9999999999
      example: 1234567890
    Email:
      type: string
      description: The business email address
      example: farm@farms.com
    AddressLine1:
      type: string
      description: The first line of the address
      example: 1 The Street
    AddressLine2:
      type: string
      description: The second line of the address
      example: The Area
    AddressLine3:
      type: string
      description: The third line of the address
      example: The Town
    City:
      type: string
      description: The fourth line of the address
      example: The Region
    County:
      type: string
      description: The fifth line of the address
      example: The County
    Postcode:
      type: string
      description: The postcode
      example: AB1 2CD
      minimum: 0
      maximum: 8
    Updated:
      type: string
      format: date-time
      description: The date the dataset received from Data Warehouse
      example: '2022-08-22T16:45:20.891Z'
    CalculationId:
      type: number
      description: Key field for calculation Data 
      example: 1234567
    CalculationReference:
      type: number
      description: Calculation reference Id
      example: 1234567
    CalculationDate:
      type: string
      format: date-time
      description: The date the calculation was performed
      example: '2022-08-22T16:45:20.891Z'
    ClaimId:
      type: number
      description: Unique Identifier for claim
      example: 12345687
    ApplicationId:
      type: number
      description: ApplicationId for calculation Data 
      example: 1234567
    PaymentBand1:
      type: string
      description: first payment band bracket amount 
      example: Up to £30000
    PaymentBand2:
      type: string
      description: second payment band bracket amount 
      example: £30,000.01 to £50,000
    PaymentBand3:
      type: string
      description: third payment band bracket amount 
      example: £50,000.01 to £150,000
    PaymentBand4:
      type: string
      description: fourth payment band bracket amount 
      example: Above £150,000
    PercentageReduction1:
      type: string
      description: First percentage bracket for progressive reductions 
      example: 50
    PercentageReduction2:
      type: string
      description: Second percentage bracket for progressive reductions 
      example: 55
    PercentageReduction3:
      type: string
      description: Third percentage bracket for progressive reductions 
      example: 60
    PercentageReduction4:
      type: string
      description: Fourth percentage bracket for progressive reductions 
      example: 70
    ProgressiveReductions1:
      type: string
      description: Value against band1 for progressive reductions 
      example: 11000
    ProgressiveReductions2:
      type: string
      description: Value against band2 for progressive reductions 
      example: 22000
    ProgressiveReductions3:
      type: string
      description: Value against band3 for progressive reductions 
      example: 33000
    ProgressiveReductions4:
      type: string
      description: Value against band4 for progressive reductions 
      example: 44000
    ReferenceAmount:
      type: string
      description: Current reference amount of total
      example: 125000
    TotalProgressiveReduction:
      type: string
      description: Total progressive reduction amount
      example: 74750
    TotalDelinkedPayment:
      type: string
      description: Total annual delinked payment amount
      example: 50250
    PaymentAmountCalculated:
      type: string
      description: TotalDelinkedPayment /2 should match paymentAmount
      example: 25125
    InvoiceNumber:
      type: string
      description: Invoice number of payment request
      example: S0000001C000001V001   
    AreaClaimed:
      type: number
      format: decimal
      description: The area claimed for the calculation in hectares
      example: 84.05
    LandArea:
      type: string
      description: The area claimed for the calculation in hectares
      example: 84.05
    GroupName:
      type: string
      description: The group name of the action
      example: Actions for hedgerows
    OverDeclarationPenalty:
      type: string
      format: decimal
      description: The over declaration penalty
      example: 120.50
    PaymentAmount:
      type: number
      format: decimal
      description: The payment amount
      example: 800.05
    PaymentPeriod:
      type: string
      description: The period covered by the payment
      example: April 2022 to June 2022
    PaymentReference:
      type: string
      description: Unique identifier for payment as shown on the remittance advice
      example: PY1234545
    QuarterlyPaymentAmount:
      type: string
      format: decimal
      description: The quarterly payment amount
      example: 100.50
    QuarterlyValue:
      type: string
      description: The quarterly value
      example: £100.50
    UnitOfMeasure:
      type: string
      description: The unit of measure
      example: Ha
    Rate:
      type: string
      description: Payment in pounds sterling per hectare
      example: £22.5/ha
    TotalActionPayments:
      type: string
      format: decimal
      description: Sum of all Action Payment
      example: 100.5
    TotalAdditionalPayments:
      type: string
      format: decimal
      description: Sum of all Additional Payment
      example: 50.2
    TotalPayments:
      type: string
      format: decimal
      description: Sum of all Payment
      example: 150.7
    TransactionDate:
      type: string
      format: date-time
      description: The date the transaction was made
      example: '2022-08-22T16:45:20.891Z'
    FundingCode:
      type: string
      description: Identifier for funding code within scheme
      example: 80001 
    Address:
      type: object
      properties:
        line1:
          $ref: '#/components/schemas/AddressLine1'
        line2:
          $ref: '#/components/schemas/AddressLine2'
        line3:
          $ref: '#/components/schemas/AddressLine3'
        line4:
          $ref: '#/components/schemas/City'
        line5:
          $ref: '#/components/schemas/County'
        postcode:
          $ref: '#/components/schemas/Postcode'
    DelinkedStatement:
      type: object
      properties:
        calculationId:
          $ref: '#/components/schemas/CalculationId'
        applicationId:
          $ref: '#/components/schemas/ApplicationId'
        frn:
          $ref: '#/components/schemas/FRN'
        sbi:
          $ref: '#/components/schemas/SBI'
        Email:
          type: string
          description: The business email address
          example: farm@farms.com
        businessName:
          $ref: '#/components/schemas/BusinessName'
        addressLine1:
          $ref: '#/components/schemas/AddressLine1'
        addressLine2:
          $ref: '#/components/schemas/AddressLine2'
        addressLine3:
          $ref: '#/components/schemas/AddressLine3'
        city:
          $ref: '#/components/schemas/City'
        county:
          $ref: '#/components/schemas/County'
        schemeYear:
          type: string
          format: integer
          description: Scheme or marketing year
          example: 2024
        paymentBand1:
          $ref: '#/components/schemas/PaymentBand1'
        paymentBand2:
          $ref: '#/components/schemas/PaymentBand2'
        paymentBand3:
          $ref: '#/components/schemas/PaymentBand3'
        paymentBand4:
          $ref: '#/components/schemas/PaymentBand4'
        percentageReduction1:
          $ref: '#/components/schemas/PercentageReduction1'
        percentageReduction2:
          $ref: '#/components/schemas/PercentageReduction2'
        percentageReduction3:
          $ref: '#/components/schemas/PercentageReduction3'
        percentageReduction4:
          $ref: '#/components/schemas/PercentageReduction4'
        progressiveReductions1:
          $ref: '#/components/schemas/ProgressiveReductions1'
        progressiveReductions2:
          $ref: '#/components/schemas/ProgressiveReductions2'
        progressiveReductions3:
          $ref: '#/components/schemas/ProgressiveReductions3'
        progressiveReductions4:
          $ref: '#/components/schemas/ProgressiveReductions4'
        referenceAmount:
          $ref: '#/components/schemas/ReferenceAmount'
        totalProgressiveReduction:
          $ref: '#/components/schemas/TotalProgressiveReduction'
        totalDelinkedPayment:
          $ref: '#/components/schemas/TotalDelinkedPayment'
        paymentAmountCalculated:
          $ref: '#/components/schemas/PaymentAmountCalculated'
        transactionDate:
          $ref: '#/components/schemas/TransactionDate'
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
    Scheme:
      type: object
      required:
        - name
        - shortName
        - year
        - frequency
      properties:
        name:
          type: string
          description: The name of the scheme
          example: Sustainable Farming Incentive
        shortName:
          type: string
          description: The short name of the scheme
          example: SFI
        year:
          type: string
          description: The marketing year
          example: 2022
        frequency:
          type: string
          description: The frequency of payments
          example: Quarterly
        agreementNumber:
           $ref: '#/components/schemas/AgreementNumber'
    Payment:
      type: object
      required:
        - invoiceNumber
        - reference
        - dueDate
        - settled
        - calculated
        - value
        - period
      properties:
        invoiceNumber:
          $ref: '#/components/schemas/InvoiceNumber'
        reference:
          $ref: '#/components/schemas/Reference'
        dueDate:
          $ref: '#/components/schemas/DueDate'
        settled:
          $ref: '#/components/schemas/Settled'
        calculated:
          $ref: '#/components/schemas/CalculationDate'
        value:
          $ref: '#/components/schemas/ValueInteger'
        period:
          $ref: '#/components/schemas/Period'
    FundingInitial:
      type: object
      required:
        - fundingCode
        - areaClaimed
        - rate
      properties:
        fundingCode:
          type: string
          description: The funding code ID
          example: 80002
        areaClaimed:
          type: string
          description: The funding option area claimed in hectares
          example: 10
        rate:
          type: string
          description: The funding option rate in pounds per hectare
          example: 40
    Funding:
      type: object
      required:
        - name
        - area
        - annualValue
        - quarterlyValue
        - quarterlyReduction
        - quarterlyPayment
      properties:
        name:
          type: string
          description: The funding option name
          example: Arable and horticultural soils
        level:
          type: string
          description: The funding option level
          example: Intermediate
        area:
          type: string
          description: The funding option area in hectares
          example: 10
        rate:
          type: string
          description: The funding option rate in pounds per hectare
          example: 40
        annualValue:
          type: string
          description: The funding option annual value in pounds
          example: 400
        quarterlyValue:
          type: string
          description: The funding option quarterly value in pounds
          example: 100
        quarterlyReduction:
          type: string
          description: The funding option quarterly reduction in pounds
          example: 75
        quarterlyPayment:
          type: string
          description: The funding option quarterly payment in pounds
          example: 25
        reductions:
          type: array
          items:
            $ref: '#/components/schemas/Reduction'
    Reduction:
      type: object
      required:
        - reason
        - value
      properties:
        reason:
          type: string
          description: The reduction name
          example: Over declaration reduction
        value:
          type: string
          description: The reduction level
          example: 75
    ScheduleDates:
      type: object
      required:
        - order
        - dueDate
        - period
        - value
        - paymentType
      properties:
        order:
          type: integer
          description: Order sequence of item in the list
          example: 1
        dueDate:
          type: string
          description: Payment due date
          example: 10/12/2022
        period:
          type: string
          description: Period of payment
          example: Oct-Dec 2022
        value:
          type: string
          description: Payment amount
          example: '375.50'
        paymentType:
          type: string
          description: Type of payment
          example: Quarterly payment
    AccountCode:
      type: string
      description: Unique account code for budgeting
      example: SOS123  
    CompletedInvoiceLineId:
      type: number
      description: Unique id given by a microservice for an invoice number after PPA
      minimum: 1
    CompletedPaymentRequestId:
      type: number
      description: Unique id given by a microservice for a payment request after PPA
      minimum: 1
    ContractNumber:
      type: string
      description: Contract number
      example: SFIP000001
    CorrelationId:
      type: string
      format: uuid
      description: GUID for event correlation
      example: ce6ec916-bebe-4bc0-bad1-255298c82845
    Currency:
      type: string
      description: Currency of values in request
      example: GBP
      enum:
        - GBP
        - EUR
    DeliveryBody:
      type: string
      description: Delivery body responsible for payment
      example: RP00
    Description:
      type: string
      description: 'Description of what line relates to, eg gross or penalty'
      example: G00 - Gross value of claim
    Detail:
      type: string
      description: Additional settlement information from DAX
      example: BAC Rejection
    DocumentReference:
      type: number
      description: >-
        Schedule ID of the document object used downstream for duplicate
        detection
      minimum: 1
      example: 1
    DueDate:
      type: string
      format: 'DD/MM/YYYY, YYYY/MM/DD, DD-MM-YYYY or YYYY-MM-DD'
      description: >-
        Date request should be issued from. If not supplied will default to
        current date.
      example: 09/11/2022
      default: Current date
    EmailAddress:
      type: string
      description: Primary email address of an organisation
      example: farm@farms.com
    FundCode:
      type: string
      description: Unique fund code to pay from
      example: DRD10
    InvoiceLinesProcessing:
      type: array
      description: List of invoice lines that make up payment request before PPA
      items:
        type: object
        required:
          - accountCode
          - description
          - fundCode
          - schemeCode
          - value
        properties:
          accountCode:
            $ref: '#/components/schemas/AccountCode'
          description:
            $ref: '#/components/schemas/Description'
          fundCode:
            $ref: '#/components/schemas/FundCode'
          schemeCode:
            $ref: '#/components/schemas/SchemeCode'
          value:
            $ref: '#/components/schemas/ValueString'
    InvoiceLinesSubmit:
      type: array
      description: List of invoice lines that make up payment request after PPA
      items:
        type: object
        required:
          - accountCode
          - description
          - fundCode
          - schemeCode
          - value
        properties:
          accountCode:
            $ref: '#/components/schemas/AccountCode'
          description:
            $ref: '#/components/schemas/Description'
          fundCode:
            $ref: '#/components/schemas/FundCode'
          schemeCode:
            $ref: '#/components/schemas/SchemeCode'
          value:
            $ref: '#/components/schemas/ValueString'
          completedInvoiceLineId:
            $ref: '#/components/schemas/CompletedInvoiceLineId'
          completedPaymentRequestId:
            $ref: '#/components/schemas/CompletedPaymentRequestId'
    InvoiceNumberSitiAgri:
      type: string
      pattern: '^SFI0[0-9]{7}$'
      description: Unique identifier for payment request in Siti Agri format
      example: SFI01234567
    Ledger:
      type: string
      description: >-
        Target ledger for settlement, AP for Accounts Payable and AR for
        Accounts Receivable
      example: AP
      enum:
        - AP
        - AR
    MarketingYear:
      type: number
      description: Scheme year for request
      minimum: 2021
      maximum: 2099
      example: 2022
    Name:
      type: string
      description: Registered name of an organisation
      example: FFC Ltd
    PaymentRequestId:
      type: number
      description: Unique id given by a microservice for a payment request before PPA
      minimum: 1
    PaymentRequestNumber:
      type: number
      description: >-
        Version of payment request starting with 1, anything greater than 1 is
        an adjustment
      minimum: 1
      maximum: 99
    PreviousPaymentCount:
      type: number
      description: >-
        No of previous payment(s) that have been made on a calculation
      minimum: 0
      example: 0
    Reference:
      type: string
      description: Settlement reference of payment request
      example: PY1234567
    ReferenceIdSubmit:
      type: string
      format: uuid
      description: GUID for a specific event reference
      example: ce6ec916-bebe-4bc0-bad1-255298c82845
    ReferenceIdReturn:
      type: string
      format: uuid
      description: GUID for a specific event reference
      example: 931e1a76-cff2-43ef-bfe5-82742eeeae68
    RemainingAmount:
      type: number
      description: Amount left to be paid
      example: 750
    SBI:
      type: number
      description: Single Business Identifier
      minimum: 105000000
      maximum: 999999999
      example: 123456789
    Schedule:
      type: string
      description: >-
        Payment frequency instruction for DAX, eg Q4 for quarterly payments,
        optional
      enum:
        - Q4
        - M12
        - T4
    SchemeCode:
      type: string
      description: Unique funding option code
      example: 80001
      enum:
        - 80001 (Arable and horticultural soils Introductory)
    SchemeId:
      type: string
      format: integer
      description: Unique ID for scheme used internal to payment services
      example: 1
      enum:
        - 1 (SFI)
        - 2 (SFI Pilot)
        - 3 (Lump Sums)
        - 4 (LNR)
        - 5 (Vet Visits)
        - 6 (SFIA)
    Settled:
      type: boolean
      description: Whether the return file has been settled or not
    SettlementDate:
      type: string
      description: Date of settlement
      example: 'Fri Jan 21 2022 10:38:44 GMT+0000 (Greenwich Mean Time)'
    SourceSystem:
      type: string
      description: System identifier request originates from
      enum:
        - SITI_SFI (SFI)
        - SITISFI (SFI Pilot)
        - SitiLUMP (Lump Sums)
        - AHWR (Vet Visits)
        - LNR (LNR)
        - SFIA (SFIA)
      example: SITI_SFI
    Type:
      type: string
      description: Type of dataset
      example: organisation
      enum:
        - calculation
        - organisation
    ValueInteger:
      type: number
      format: integer
      description: >-
        Value of request or invoice line after enrichment with main and
        fractional currency combined
      minimum: 0
      maximum: 999999999999
      example: 50000
    ValueString:
      type: string
      description: Value of request as string decimal
      example: 500
    BusinessName:
      type: string
      description: The business name
      example: FFC Ltd
    Period:
      type: string
      description: Period of payment request
      example: September 2022 - August 2023
    TypeCalculation:
      type: string
      description: Constant CALCULATION
      example: calculation
    TypeDelinked:
      type: string
      description: Constant DELINKEDCALCULATION
      example: delinkedCalculation
    TypeDax:
      type: string
      description: Constant DAX
      example: dax
    TypeOrganisation:
      type: string
      description: Constant ORGANISATION
      example: organisation
    TypeTotals:
      type: string
      description: Constant TOTALS
      example: total
    TypeSFI23QuarterlyStatement:
      type: string
      description: Constant SFI23QUARTERLYPAYMENT
      example: SFI23QuarterlyStatement
    SchemeType:
      type: string
      description: Type of scheme that payment is made for.
      example: SFI-23
    SchemeName:
      type: string
      description: Full name of scheme.
      example: Sustainable Farming Incentive
